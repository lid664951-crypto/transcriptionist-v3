# 音译家 AI 音效管理工具 v1.2.0

<div align="center">

![音译家 AI 音效管理工具 v1.2.0 首页](screenshots/首页_v1.2.0.png)

**面向音效从业者的本地优先 AI 音效管理平台**

[![License: GPL v2](https://img.shields.io/badge/License-GPL%20v2-blue.svg)](https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html)
[![Python 3.11+](https://img.shields.io/badge/python-3.11+-blue.svg)](https://www.python.org/downloads/)
[![GUI: PySide6](https://img.shields.io/badge/GUI-PySide6-green.svg)](https://www.qt.io/qt-for-python)

</div>

---

## 项目简介

音译家（Transcriptionist v3）用于管理大体量音效素材，核心目标是：

- 让音效库在万级以上数据下仍可用、可检索、可维护。
- 提供 AI 翻译、AI 检索、自动打标、在线资源工作流。
- 保持本地优先的数据闭环（数据库、索引、可回滚重命名）。

---

## v1.2.0 核心更新（重构版）

本次不是“功能小修”，而是围绕 **工作台体验、数据链路、AI 业务链路、工程化发布** 的系统级重构。

### v1.2.0 变更速览表

| 模块 | 影响 | 用户可感知变化 |
|---|---|---|
| 工作台与主题系统 | UI 架构与交互节奏统一 | 页面更整洁，深浅色一致，分屏/全屏切换更顺滑 |
| 音效库视图（卡片/表格） | 视图链路与列布局修复 | 表格可拖动列宽，卡片与表格切换不再互相影响 |
| 波形渲染与播放体验 | 波形算法与线程配置增强 | 波形更接近专业工具观感，可按机器性能调整线程 |
| AI 批量翻译链路 | 数据库主线收敛，异常回退补齐 | 翻译后替换/撤销更稳定，文件与文件夹命名更可控 |
| AI 音效工坊（Kling） | 新服务接入并替代旧 MusicGen 路线 | 设置页可配置 AK/SK，参数真实生效并支持鉴权检测 |
| 在线资源与检索 | 旧死代码清理 + 检索闸门/基线流程落地 | 在线资源更稳定，检索质量可量化、可回归 |
| 百万级压测与迁移流程 | 压测脚本、批处理入口、Alembic 工作流完善 | 无需海量真实素材也可做压力验证，数据库迁移更可控 |
| 打包与发布 | PyInstaller 校验链路增强 | 打包成功率更高，资源遗漏与“假失败”显著减少 |

### 1) 工作台与 UI 体验重构

- 重做工作区组织方式，强化“音效库 / 工作台”双主视角交互。
- 布局与信息层级统一：顶栏、状态条、页面间距、控件节奏整体收敛。
- 支持双向全屏工作模式，减少切换成本，提升高频操作效率。
- 主题系统 token 化（深/浅色联动），重点修复了多处硬编码配色导致的视觉割裂。

### 2) 音效库页面与波形系统升级

- 卡片视图与表格视图持续打磨，恢复表格列宽交互并修复视图间互相污染问题。
- 波形渲染从“可显示”升级到“专业观感导向”：线宽、间距、对比度、频段偏置。
- 波形颜色完全跟随主题，不再使用独立硬编码色值。
- 新增波形线程策略：默认推荐 + 手动调节，配置变更可运行时生效。

### 3) AI 翻译链路稳定性重构（数据库主线）

- 翻译任务与应用替换流程统一收敛到数据库驱动链路，减少内存态分叉。
- 修复“翻译后替换 / 撤销替换”中的路径漂移、文件不存在、状态错乱问题。
- 文件与文件夹翻译均纳入规则链：清洗规则 + 命名模板 + 回退兜底。
- 旧翻译 worker 与新任务链路都补齐异常分支，避免空翻译产生脏命名。

### 4) AI 音效工坊改版（替代旧 MusicGen）

- 板块从“AI 音乐工坊实验室”升级为“AI 音效工坊”。
- 新增可灵文本生成音效接入（AK/SK、Base URL、鉴权检测、轮询参数）。
- 生成参数与官方 API 约束对齐（例如时长范围），参数不再是展示型假 UI。
- 设置页旧 MusicGen 下载/删除相关入口与死代码已下线清理。

### 5) 在线资源与检索链路优化

- 在线资源板块做了结构与交互修复，清理旧翻译死代码，降低回归风险。
- AI 检索策略层与一致性基线工具落地，支持基准矩阵、回归闸门与结果报告。
- 引入检索 orchestrator 与门禁状态模块，提升检索稳定性与可观测性。

### 6) 百万级场景工程化（压测与迁移）

- 新增无百万真实素材压测方案（synth/hardlink/copy）与完整压力测试脚本。
- 新增 Windows 一键批处理压测入口，支持 smoke/100k/500k/1m/all。
- 引入 Alembic 版本化迁移工作流，明确数据库版本与升级/回滚路径。

### 7) 打包与发布链路增强

- PyInstaller 构建脚本升级：预检、资源校验、产物校验、安装包联动。
- 中文产物命名统一：绿色版目录与安装包均为 `音译家AI音效管理工具1.2.0`。
- 修复 PyInstaller `_internal` 目录布局下的误报校验，减少“假失败”。
- 增加 Nuitka 诊断文档与构建说明，用于后续编译链路评估。

### 8) 本次落地产出（文档/脚本/流程）

- 发布说明、实施计划、发布就绪清单、架构决策（ADR）已同步到 `docs/`。
- 检索一致性模板、压测指南、发布闸门脚本与基线流程已落地可执行。
- README 与版本文档已统一到 `v1.2.0` 语义，方便后续版本迭代维护。

---

## 主要功能

- 本地音效库管理（树形结构、卡片/表格视图、批量操作）
- AI 批量翻译（术语库、命名模板、清洗规则联动）
- AI 智能检索（向量检索与相关排序链路）
- AI 自动打标与标签管理
- 在线资源检索与导入
- AI 音效工坊（文本生成音效）

---

## 快速开始

### 运行源码

```bash
git clone https://github.com/lid664951-crypto/transcriptionist-v3.git
cd transcriptionist-v3
pip install -r requirements.txt
python -m transcriptionist_v3
```

### Windows 快速运行

- 直接运行：`run.bat`
- Qt 启动脚本：`run_qt.bat`

---

## 打包发布

### PyInstaller（当前主发布链路）

```bat
build.bat
```

产物默认位于：

- 绿色版目录：`dist/音译家AI音效管理工具1.2.0`
- 安装包：`dist/音译家AI音效管理工具1.2.0.exe`

---

## 文档索引

- 版本更新详单：`docs/UPDATE_LOG_v1.2.0_COLLAB_DETAILED.md`
- 发布说明：`docs/RELEASE_NOTES_v1.2.0.md`
- 实施计划：`docs/IMPLEMENTATION_PLAN_v1.2.0.md`
- 压测指南：`docs/STRESS_TEST_GUIDE_v1.2.0.md`

---

## 工程说明

- 本项目在产品与交互层面参考了行业工具方法论（含 Soundly 使用流程研究），
  目标是学习其产品思想并结合本项目业务做独立实现。
- 项目持续按“配置化、任务化、可观测、可回滚”方向迭代。

---

## 许可证

本项目采用 [GPL-2.0](LICENSE) 开源协议。

---

## 联系与反馈

- Issues：<https://github.com/lid664951-crypto/transcriptionist-v3/issues>
- 仓库：<https://github.com/lid664951-crypto/transcriptionist-v3>
